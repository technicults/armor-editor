<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Editor with AI - ArmorEditor</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }
        .blog-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .blog-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .blog-editor {
            padding: 30px;
        }
        .title-input {
            width: 100%;
            font-size: 28px;
            font-weight: bold;
            border: none;
            outline: none;
            padding: 15px 0;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
            background: transparent;
        }
        .title-input:focus {
            border-bottom-color: #667eea;
        }
        .blog-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .meta-item {
            display: flex;
            flex-direction: column;
        }
        .meta-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }
        .meta-value {
            font-weight: 500;
        }
        .blog-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            background: #f8f9fa;
            border-top: 1px solid #eee;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background: #007bff;
            color: white;
        }
        .btn-success {
            background: #28a745;
            color: white;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .ai-setup {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .api-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="blog-container">
        <div class="blog-header">
            <h1>üìù AI-Powered Blog Editor</h1>
            <p>Write amazing blog posts with AI assistance</p>
        </div>

        <div class="blog-editor">
            <div class="ai-setup">
                <h4>ü§ñ AI Configuration</h4>
                <input type="password" id="openai-key" class="api-input" placeholder="OpenAI API Key (sk-...)">
                <button class="btn btn-primary" onclick="enableAI()">Enable AI Assistant</button>
            </div>

            <input type="text" id="blog-title" class="title-input" placeholder="Enter your blog post title...">
            
            <div class="blog-meta">
                <div class="meta-item">
                    <span class="meta-label">Word Count</span>
                    <span class="meta-value" id="word-count">0</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Reading Time</span>
                    <span class="meta-value" id="reading-time">0 min</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">AI Status</span>
                    <span class="meta-value" id="ai-status">Disabled</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Save Status</span>
                    <span class="meta-value" id="save-status">Ready</span>
                </div>
            </div>

            <div id="blog-editor"></div>
        </div>

        <div class="blog-actions">
            <div>
                <button class="btn btn-primary" onclick="saveDraft()">üíæ Save Draft</button>
                <button class="btn btn-primary" onclick="generateOutline()">üìã Generate Outline</button>
                <button class="btn btn-primary" onclick="improveContent()">‚ú® Improve with AI</button>
            </div>
            <div>
                <button class="btn btn-success" onclick="publishPost()">üöÄ Publish Post</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { ArmorEditor } from 'https://unpkg.com/armor-editor@latest/dist/index.esm.js';

        let blogEditor = null;
        let aiEnabled = false;

        // Initialize blog editor
        function initializeBlogEditor() {
            blogEditor = new ArmorEditor({
                container: '#blog-editor',
                height: '500px',
                placeholder: 'Start writing your blog post... Type "/" for AI templates',
                toolbar: [
                    'bold', 'italic', 'underline', '|',
                    'fontSize', 'textColor', '|',
                    'alignLeft', 'alignCenter', 'alignRight', '|',
                    'orderedList', 'unorderedList', '|',
                    'link', 'image', 'blockquote', '|',
                    'wordCount', 'spellCheck'
                ],
                onChange: updateStats,
                autoSave: {
                    interval: 30000,
                    callback: (content) => {
                        document.getElementById('save-status').textContent = 'Auto-saved';
                        setTimeout(() => {
                            document.getElementById('save-status').textContent = 'Ready';
                        }, 2000);
                    }
                }
            });

            // Set initial content
            blogEditor.setContent(`
                <h2>Welcome to AI-Powered Blogging! üéâ</h2>
                <p>This is your AI-enhanced blog editor. Here's what you can do:</p>
                <ul>
                    <li><strong>Type "/" for templates</strong> - Quick blog post structures</li>
                    <li><strong>Select text and use AI</strong> - Improve, expand, or rewrite content</li>
                    <li><strong>Generate outlines</strong> - Let AI create your blog structure</li>
                    <li><strong>Auto-save</strong> - Never lose your work</li>
                </ul>
                <p>Start writing your amazing blog post below!</p>
            `);
        }

        // Enable AI features
        window.enableAI = () => {
            const apiKey = document.getElementById('openai-key').value;
            if (!apiKey) {
                alert('Please enter your OpenAI API key');
                return;
            }

            // Reinitialize with AI
            if (blogEditor) {
                blogEditor.destroy();
            }

            blogEditor = new ArmorEditor({
                container: '#blog-editor',
                height: '500px',
                placeholder: 'Start writing your blog post... AI assistance is now active!',
                toolbar: [
                    'bold', 'italic', 'underline', '|',
                    'fontSize', 'textColor', '|',
                    'alignLeft', 'alignCenter', 'alignRight', '|',
                    'orderedList', 'unorderedList', '|',
                    'link', 'image', 'blockquote', '|',
                    'AI', '|',
                    'wordCount', 'spellCheck'
                ],
                ai: {
                    enabled: true,
                    provider: 'openai',
                    apiKey: apiKey,
                    model: 'gpt-3.5-turbo',
                    features: {
                        smartSuggestions: true,
                        contentGeneration: true,
                        grammarCheck: true,
                        toneAdjustment: true
                    }
                },
                onChange: updateStats,
                autoSave: {
                    interval: 30000,
                    callback: (content) => {
                        document.getElementById('save-status').textContent = 'Auto-saved';
                        setTimeout(() => {
                            document.getElementById('save-status').textContent = 'Ready';
                        }, 2000);
                    }
                }
            });

            aiEnabled = true;
            document.getElementById('ai-status').textContent = 'Active';
            document.getElementById('ai-status').style.color = '#28a745';
            
            // Set enhanced content
            blogEditor.setContent(`
                <h2>ü§ñ AI Assistant Activated!</h2>
                <p>Your blog editor now has AI superpowers:</p>
                <ul>
                    <li><strong>Smart Suggestions</strong> - Get writing tips as you type</li>
                    <li><strong>Content Generation</strong> - Click "Generate Outline" to start</li>
                    <li><strong>Grammar & Style</strong> - Automatic improvements</li>
                    <li><strong>Tone Adjustment</strong> - Make it professional or casual</li>
                </ul>
                <p>Try selecting this text and clicking the AI button in the toolbar!</p>
            `);
        };

        // Update statistics
        function updateStats(content) {
            const text = content.replace(/<[^>]*>/g, '');
            const wordCount = text.split(/\s+/).filter(word => word.length > 0).length;
            const readingTime = Math.ceil(wordCount / 200); // 200 words per minute

            document.getElementById('word-count').textContent = wordCount;
            document.getElementById('reading-time').textContent = `${readingTime} min`;
        }

        // Blog actions
        window.saveDraft = () => {
            const title = document.getElementById('blog-title').value;
            const content = blogEditor ? blogEditor.getContent() : '';
            
            // Simulate save
            document.getElementById('save-status').textContent = 'Saving...';
            setTimeout(() => {
                document.getElementById('save-status').textContent = 'Saved';
                setTimeout(() => {
                    document.getElementById('save-status').textContent = 'Ready';
                }, 2000);
            }, 1000);
            
            console.log('Draft saved:', { title, content: content.substring(0, 100) + '...' });
        };

        window.generateOutline = async () => {
            if (!aiEnabled) {
                alert('Please enable AI first');
                return;
            }

            const title = document.getElementById('blog-title').value || 'My Blog Post';
            
            try {
                const outline = await blogEditor.generateContent(
                    `Generate a detailed blog post outline for: "${title}". Include introduction, 3-5 main sections, and conclusion.`
                );
                
                blogEditor.setContent(outline);
                document.getElementById('save-status').textContent = 'Outline Generated';
            } catch (error) {
                alert('Error generating outline: ' + error.message);
            }
        };

        window.improveContent = () => {
            if (!aiEnabled) {
                alert('Please enable AI first');
                return;
            }

            const selection = window.getSelection();
            if (selection.toString()) {
                // Simulate AI improvement
                alert('AI would improve the selected text. In a real implementation, this would call the AI API.');
            } else {
                alert('Please select some text to improve');
            }
        };

        window.publishPost = () => {
            const title = document.getElementById('blog-title').value;
            const content = blogEditor ? blogEditor.getContent() : '';
            
            if (!title.trim()) {
                alert('Please enter a blog title');
                return;
            }
            
            if (!content.trim() || content.length < 100) {
                alert('Please write some content for your blog post');
                return;
            }
            
            // Simulate publish
            alert(`üöÄ Blog post "${title}" published successfully!`);
            console.log('Published:', { title, content });
        };

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            initializeBlogEditor();
        });
    </script>
</body>
</html>
